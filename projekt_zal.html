<!DOCTYPE html>
<html lang="pl" dir="ltr">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Nazwa-Biuro Podróży</title>
        <link rel="stylesheet" type="text/css" href="projekt_zal.css">
        <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
        <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    </head>
    <body>
        <h1>Nazwa</h1>
        <nav>
            <a href="#" class="active">Mapa</a>
            <a href="oferty.html">Oferty</a>
            <a href="poradnik.html">Poradnik</a>
            <a href="kontakt.html">Kontakt</a>
            <a href="onas.html">O nas</a>
        </nav>
        <div class="filter-container">
            <label for="continent-filter">Filtruj według kontynentu:</label>
            <select id="continent-filter">
                <option value="all">Wszystkie</option>
                <option value="Africa">Afryka</option>
                <option value="Europe">Europa</option>
                <option value="Asia">Azja</option>
            </select>
            <label for="filter-type">Filtruj według rodzaju:</label>
            <select id="filter-type">
                <option value="all">Wszystkie</option>
                <option value="adventure">Przygoda</option>
                <option value="rare">Rzadko spotykane</option>
                <option value="cultural">Kulturalna</option>
            </select>
        </div>
        <div id="map" style="height: 500px; width: 100%;margin: 20px 0;">
        </div>
        <script>
            // Inicjalizacja mapy
    var map = L.map('map').setView([20, 0], 2); // Środek mapy i początkowy poziom zoomu

// Dodanie warstwy kafelkowej (mapa bazowa)
L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    maxZoom: 19,
    attribution: '© OpenStreetMap contributors'
}).addTo(map);

// Punkty z destynacjami (latitude, longitude, i linki do ofert)
var destinations = [
    { name: "Kraj1", coords: [26.8206, 30.8025], link: "oferta-kraj1.html", continent: "Africa", type:"rare" },
    { name: "Kraj2", coords: [41.8719, 12.5674], link: "oferta-kraj2.html", continent: "Europe", type:"cultural"},
    { name: "Kraj3", coords: [39.0742, 21.8243], link: "oferta-kraj3.html", continent: "Europe", type:"adventure"}
];

// Tablica przechowująca markery
var markers = [];

// Funkcja do dodawania markerów na mapę
function addMarkers(destinations) {
    // Usuwamy istniejące markery
    markers.forEach(marker => map.removeLayer(marker));
    markers = []; // Czyścimy tablicę

    // Dodajemy nowe markery na mapę
    destinations.forEach(dest => {
        var marker = L.marker(dest.coords)
            .addTo(map)
            .bindPopup(`<b>${dest.name}</b><br><a href="${dest.link}">Przejdź do oferty</a>`)
            .on('click', function () {
                window.location.href = dest.link; // Przekierowanie po kliknięciu
            });
        markers.push(marker);
    });
}

// Wywołanie funkcji z pełną listą destynacji na start
addMarkers(destinations);

// Obsługa zmiany w filtrze
document.getElementById('continent-filter').addEventListener('change', applyFilters);
document.getElementById('filter-type').addEventListener('change', applyFilters);

function applyFilters() {
    var selectedContinent = document.getElementById('continent-filter').value;
    var selectedType = document.getElementById('filter-type').value;

    // Filtrujemy destynacje według kontynentu i rodzaju
    var filteredDestinations = destinations.filter(dest => 
        (selectedContinent === "all" || dest.continent === selectedContinent) &&
        (selectedType === "all" || dest.type === selectedType)
    );

    // Aktualizujemy markery na mapie
    addMarkers(filteredDestinations);
}
        </script>
        <footer>
            <p>Copyright © 2024 | Nazwa-Biuro Podróży</p>
        </footer>
    </body>
</html>